robots:
  optotrak_cube:
    urdf: "/software/perception/manipulation_tracking/urdf/optotrak_cube.urdf"
    q0:
      base_x: 0.6
      base_z: 1.0
  irb140:
    urdf: "/software/perception/manipulation_tracking/urdf/irb140_chull_ati_gelsight.urdf"
    q0:
      base_x: -0.17
      base_z: 0.91


publish:
  irb140_state:
    robot_name: "IRB140_ATI_GELSIGHT"
    type: "state"
    channel: "EST_MANIPULAND_STATE_IRB140_ATI_GELSIGHT_GT"
  optotrak_cube_state:
    robot_name: "optotrak_cube"
    type: "state"
    channel: "EST_MANIPULAND_STATE_optotrak_cube_GT"

post_transform:
  source_robot: "IRB140_ATI_GELSIGHT"
  dest_frame: "robot_base"

dynamics:
  dynamics_floating_base_var: 0.01 # m per frame
  dynamics_other_var: 0.1 # rad per frame
  verbose: False

costs:
  - type: "OptotrakMarkerCost"
    verbose: false
    verbose_lcmgl: true
    timeout_time: 0.2
    localization_var: 0.001
    transform_var: .inf
    world_frame: true
    attached_manipuland: "optotrak_cube"
    markers:
# all units mm
# x width: 132.4
# y width: 126.1
# z widht: 126.1
# no markers on +x, -x surfaces, which are plates screwed onto box
#   12.4mm in from +x, -x surfaces
#   9.4mm in from the other direction
# origin is at the middle, so all markers are at x = +/- 53.8mm
#                                     +/- 63.05mm in the normal direction
#                                 and +/- 53.65mm in other dir
      - ids: [1]
        body: "optotrak_cube"
        pos: [-0.05380, -0.05365,  0.06305]
      - ids: [2]
        body: "optotrak_cube"
        pos: [ 0.05380, -0.05365,  0.06305]
      - ids: [3]
        body: "optotrak_cube"
        pos: [ 0.05380,  0.05365,  0.06305]
      - ids: [4]
        body: "optotrak_cube"
        pos: [-0.05380,  0.05365,  0.06305]
      - ids: [5]
        body: "optotrak_cube"
        pos: [-0.05380,  0.06305,  0.05365]
      - ids: [6]
        body: "optotrak_cube"
        pos: [ 0.05380,  0.06305,  0.05365]
      - ids: [7]
        body: "optotrak_cube"
        pos: [ 0.05380,  0.06305, -0.05365]
      - ids: [8]
        body: "optotrak_cube"
        pos: [-0.05380,  0.06305, -0.05365]
      - ids: [9]
        body: "optotrak_cube"
        pos: [-0.05380,  0.05365, -0.06305]
      - ids: [10]
        body: "optotrak_cube"
        pos: [ 0.05380,  0.05365, -0.06305]
      - ids: [11]
        body: "optotrak_cube"
        pos: [ 0.05380, -0.05365, -0.06305]
      - ids: [12]
        body: "optotrak_cube"
        pos: [-0.05380, -0.05365, -0.06305]
      - ids: [13]
        body: "optotrak_cube"
        pos: [-0.05380, -0.06305, -0.05365]
      - ids: [14]
        body: "optotrak_cube"
        pos: [ 0.05380, -0.06305, -0.05365]
      - ids: [15]
        body: "optotrak_cube"
        pos: [ 0.05380, -0.06305,  0.05365]
      - ids: [16]
        body: "optotrak_cube"
        pos: [-0.05380, -0.06305,  0.05365]

  - type: "OptotrakMarkerCost"
    verbose: false
    verbose_lcmgl: true
    timeout_time: 0.2
    localization_var: 0.001
    transform_var: .inf
    attached_manipuland: "IRB140_ATI_GELSIGHT"
    markers:
      - ids: [17]
        body: "link_1"
        pos: [6.282689e-02, -2.397424e-01, 2.101812e-01]
      - ids: [18]
        body: "link_1"
        pos: [6.512728e-02, -2.200037e-01, 2.097878e-01]
      - ids: [19]
        body: "link_1"
        pos: [8.039344e-02, -2.298907e-01, 2.102515e-01]
      - ids: [20]
        body: "link_3"
        pos: [1.382855e-02, 2.140865e-03, 9.440009e-02]
      - ids: [21]
        body: "link_3"
        pos: [-6.659630e-03, 3.010527e-03, 9.383106e-02]
      - ids: [22]
        body: "link_3"
        pos: [4.156432e-03, 1.989799e-02, 9.396998e-02]
      - ids: [23]
        body: "link_4"
        pos: [1.730263e-01, -4.439354e-02, 6.990813e-02]
      - ids: [24]
        body: "link_4"
        pos: [1.531158e-01, -4.354208e-02, 6.923606e-02]
      - ids: [25]
        body: "link_4"
        pos: [1.638568e-01, -2.640503e-02, 6.948395e-02]
      - ids: [26]
        body: "link_4"
        pos: [1.733109e-01, -8.130056e-03, 7.097108e-02]
      - ids: [27]
        body: "link_4"
        pos: [1.527806e-01, -6.645826e-03, 7.072588e-02]
      - ids: [28]
        body: "link_4"
        pos: [1.643348e-01, 1.034290e-02, 7.071851e-02]
      - ids: [29]
        body: "link_4"
        pos: [4.418605e-02, 1.030755e-02, 7.262910e-02]
      - ids: [30]
        body: "link_4"
        pos: [4.128138e-02, -9.531599e-03, 7.324411e-02]
      - ids: [31]
        body: "link_4"
        pos: [2.532969e-02, 2.935559e-03, 7.385914e-02]

  - type: "RobotStateCost"
    joint_known_fb_var: .inf # m
    joint_known_encoder_var: 0.001 # radian
    transcribe_floating_base_vars: False
    verbose: False
    state_channelname: "EST_ROBOT_STATE"